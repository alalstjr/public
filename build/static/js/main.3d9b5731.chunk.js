(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,n){n(157),e.exports=n(367)},341:function(e,t,n){},365:function(e,t,n){},367:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(108),i=n.n(a),s=n(371),c=n(369),u=n(372),l=n(2),f=n.n(l),p=n(368),m=n(74),d=n.n(m);function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S={search:"M451.248,354.559c81.001-81.002,81-212.805,0-293.807c-81.002-81.002-212.802-81.002-293.803,0c-68.72,68.72-79.127,170.923-31.251,250.733c0,0,3.439,5.77-1.206,10.412C98.491,348.392,18.994,427.89,18.994,427.89c-21.097,21.096-26.12,50.595-7.411,69.307l3.221,3.219c18.709,18.712,48.21,13.691,69.305-7.406c0,0,79.329-79.33,105.771-105.771c4.867-4.868,10.635-1.429,10.635-1.429C280.325,433.685,382.528,423.278,451.248,354.559z M195.799,316.202c-59.853-59.853-59.851-157.238,0.001-217.091c59.853-59.851,157.238-59.853,217.09,0c59.853,59.851,59.853,157.238,0,217.091C353.038,376.052,255.654,376.052,195.799,316.202z M209.059,195.326c-2.786,0-5.618-0.548-8.348-1.701c-10.904-4.615-16.005-17.196-11.39-28.102c29.006-68.546,108.369-100.714,176.914-71.708c10.904,4.615,16.006,17.196,11.391,28.102c-4.616,10.906-17.194,16.004-28.104,11.391c-46.767-19.789-100.919,2.159-120.707,48.926C225.353,190.413,217.413,195.326,209.059,195.326z",login:"M131.5,472H60.693c-8.538,0-13.689-4.765-15.999-7.606c-3.988-4.905-5.533-11.289-4.236-17.519c20.769-99.761,108.809-172.616,210.445-174.98c1.693,0.063,3.39,0.105,5.097,0.105c1.723,0,3.434-0.043,5.143-0.107c24.853,0.567,49.129,5.24,72.235,13.918c10.34,3.885,21.871-1.353,25.754-11.693c3.883-10.34-1.352-21.871-11.692-25.754c-3.312-1.244-6.646-2.408-9.995-3.512C370.545,220.021,392,180.469,392,136C392,61.01,330.991,0,256,0S120,61.01,120,136c0,44.509,21.492,84.092,54.643,108.918c-30.371,9.998-58.871,25.546-83.813,46.063c-45.732,37.617-77.529,90.086-89.532,147.742c-3.762,18.066,0.744,36.622,12.363,50.908C25.221,503.847,42.364,512,60.693,512H131.5c11.046,0,20-8.954,20-20S142.546,472,131.5,472z M160,136c0-52.935,43.065-96,96-96c52.935,0,96,43.065,96,96c0,51.367-40.554,93.438-91.326,95.885c-1.557-0.028-3.113-0.052-4.674-0.052c-1.564,0-3.127,0.023-4.689,0.051C200.546,229.43,160,187.362,160,136z M496.689,344.607c-8.562-19.15-27.846-31.559-49.177-31.607h-62.372c-0.045,0-0.087,0-0.133,0c-22.5,0-42.13,13.26-50.029,33.807c-1.051,2.734-2.336,6.178-3.677,10.193H200.356c-5.407,0-10.583,2.189-14.35,6.068l-34.356,35.388c-7.567,7.794-7.529,20.203,0.085,27.95l35,35.611c3.76,3.826,8.9,5.981,14.264,5.981h65c11.046,0,20-8.954,20-20s-8.954-20-20-20h-56.614l-15.428-15.698L208.814,397h137.491c9.214,0,17.235-6.295,19.427-15.244c1.617-6.607,3.647-12.959,6.584-20.596c1.936-5.036,6.798-8.16,12.74-8.16c0.014,0,0.026,0,0.039,0h62.371c5.656,0.014,10.524,3.053,12.705,7.932c5.369,12.012,11.78,30.608,11.828,50.986c0.048,20.529-6.356,39.551-11.739,51.894c-2.17,4.979-7.079,8.188-12.56,8.188c-0.011,0-0.022,0-0.033,0h-63.125c-5.533-0.013-10.716-3.573-12.896-8.858c-2.34-5.671-4.366-12.146-6.197-19.797c-2.571-10.742-13.367-17.365-24.105-14.796c-10.743,2.571-17.367,13.364-14.796,24.106c2.321,9.699,4.979,18.118,8.121,25.737c8.399,20.364,27.939,33.556,49.827,33.606h63.125c0.043,0,0.083,0,0.126,0c21.351-0.001,40.646-12.63,49.18-32.201c6.912-15.851,15.138-40.511,15.072-67.975C511.935,384.434,503.638,360.152,496.689,344.607z M431,392c11.046,0,20,8.954,20,20s-8.954,20-20,20s-20-8.954-20-20S419.954,392,431,392z",logout:"M510.371,226.513c-1.088-2.603-2.646-4.971-4.629-6.955l-63.979-63.979c-8.341-8.32-21.823-8.32-30.165,0c-8.341,8.341-8.341,21.845,0,30.165l27.584,27.584H320.013c-11.797,0-21.333,9.557-21.333,21.333c0,11.776,9.536,21.333,21.333,21.333h119.168l-27.584,27.584c-8.341,8.341-8.341,21.845,0,30.165c4.16,4.181,9.621,6.251,15.083,6.251s10.923-2.069,15.083-6.251l63.979-63.979c1.983-1.963,3.541-4.331,4.629-6.955C512.525,237.606,512.525,231.718,510.371,226.513z M362.68,298.667c-11.797,0-21.333,9.558-21.333,21.333v106.667h-85.333V85.333c0-9.408-6.187-17.728-15.211-20.437l-74.091-22.229h174.635v106.667c0,11.776,9.536,21.333,21.333,21.333s21.333-9.557,21.333-21.333v-128C384.013,9.557,374.477,0,362.68,0H21.347c-0.768,0-1.451,0.32-2.197,0.405c-1.003,0.107-1.92,0.277-2.88,0.512c-2.24,0.576-4.267,1.451-6.165,2.645C9.636,3.861,9.06,3.882,8.612,4.223C8.44,4.352,8.376,4.587,8.205,4.715C5.88,6.549,3.939,8.789,2.531,11.456c-0.299,0.576-0.363,1.195-0.597,1.792c-0.683,1.621-1.429,3.2-1.685,4.992c-0.107,0.64,0.085,1.237,0.064,1.856c-0.021,0.427-0.299,0.811-0.299,1.237V448c0,10.176,7.189,18.923,17.152,20.907l213.333,42.667c1.387,0.299,2.795,0.427,4.181,0.427c4.885,0,9.685-1.685,13.525-4.843c4.928-4.054,7.808-10.091,7.808-16.491v-21.333H362.68c11.797,0,21.333-9.557,21.333-21.333V320C384.013,308.225,374.477,298.667,362.68,298.667z",star:"M503.713,224.356L399.809,325.652l24.523,143.039c1.758,10.299-2.499,20.721-10.943,26.872c-4.778,3.475-10.464,5.245-16.148,5.245c-4.366,0-8.761-1.043-12.783-3.158L256,430.12l-128.457,67.53c-9.255,4.875-20.46,4.051-28.932-2.06c-8.445-6.151-12.688-16.56-10.916-26.872l24.538-143.039L8.301,224.37c-7.511-7.292-10.175-18.208-6.976-28.149c3.24-9.941,11.823-17.178,22.176-18.688l143.616-20.885L231.38,26.501c4.6-9.392,14.157-15.324,24.606-15.324c10.477,0,19.992,5.932,24.62,15.311l64.263,130.146l143.644,20.885c10.326,1.497,18.936,8.747,22.121,18.688C513.901,206.148,511.169,217.065,503.713,224.356z"},g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,v(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){return r.a.createElement("svg",{x:"0px",y:"0px",width:this.props.width?this.props.width:"auto",height:this.props.height?this.props.height:"auto",viewBox:"0 0 512 512"},r.a.createElement("path",{fill:this.props.color,d:S[this.props.name]}))}}])&&y(n.prototype,o),a&&y(n,a),t}();function O(e){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var j,R=function(e){function t(e){var n,o,r,a,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=_(t).call(this,e),n=!r||"object"!==O(r)&&"function"!==typeof r?T(o):r,a=T(T(n)),s=function(){var e=function(){n.setState({search:!n.state.search})};n.state.search,e()},(i="toggleSearch")in a?Object.defineProperty(a,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[i]=s,n.state={search:!1},n}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=r.a.createElement("li",null,r.a.createElement(p.a,{to:"/login"},r.a.createElement(g,{name:"login",width:"2rem",height:"4rem",color:"#ffffff"}),r.a.createElement("div",{className:"t-h"},"login"))),t=r.a.createElement("li",null,r.a.createElement("a",{onClick:this.props.onLogout},r.a.createElement(g,{name:"logout",width:"2rem",height:"4rem",color:"#ffffff"}),r.a.createElement("div",{className:"t-h"},"logout")));return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper blue darken-1"},r.a.createElement(p.a,{to:"/",className:"brand-logo center"},"MEMOPAD"),r.a.createElement("ul",{className:"line"},r.a.createElement("li",null,r.a.createElement("a",{onClick:this.toggleSearch},r.a.createElement(g,{name:"search",width:"2rem",height:"4rem",color:"#ffffff"}),r.a.createElement("div",{className:"t-h"},"search")))),r.a.createElement("div",{className:"right"},r.a.createElement("ul",{className:"line"},this.props.isLoggedIn?t:e)))),r.a.createElement(d.a,{transitionName:"search",transitionEnterTimeout:300,transitionLeaveTimeout:300},this.state.search?r.a.createElement(we,{onClose:this.toggleSearch,usernames:this.props.usernames,onSearch:this.props.onSearch,searchStatus:this.props.searchStatus}):void 0))}}])&&w(n.prototype,o),a&&w(n,a),t}(),U={isLoggedIn:f.a.bool,onLogout:f.a.func},I={isLoggedIn:!1,onLogout:(j="onLogout",function(){return console.warn("".concat(j," is not defined"))})};R.propTypes=U,R.defaultProps=I;var L=R;function P(e){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var $=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=N(t).call(this,e))||"object"!==P(r)&&"function"!==typeof r?A(o):r).state={username:"",password:""},n.handleChange=n.handleChange.bind(A(A(n))),n.handleLogin=n.handleLogin.bind(A(A(n))),n.handleRegister=n.handleRegister.bind(A(A(n))),n.handleKeyPress=n.handleKeyPress.bind(A(A(n))),n}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,r.a.Component),n=t,(o=[{key:"handleChange",value:function(e){var t={};t[e.target.name]=e.target.value,this.setState(t)}},{key:"handleLogin",value:function(){var e=this,t=this.state.username,n=this.state.password;this.props.onLogin(t,n).then(function(t){t||e.setState({password:""})})}},{key:"handleRegister",value:function(){var e=this,t=this.state.username,n=this.state.password;this.props.onRegister(t,n).then(function(t){t||e.setState({username:"",password:""})})}},{key:"handleKeyPress",value:function(e){13==e.charCode&&(this.props.mode?this.handleLogin():this.handleRegister())}},{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement("div",{className:"input-field col s12 username"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{name:"username",type:"text",className:"validate",onChange:this.handleChange,value:this.state.username})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",className:"validate",onChange:this.handleChange,value:this.state.password,onKeyPress:this.handleKeyPress}))),t=r.a.createElement("div",null,r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"row"},e,r.a.createElement("a",{className:"waves-effect waves-light btn",onClick:this.handleLogin},"SUBMIT"))),r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"right"},"New Here? ",r.a.createElement(p.a,{to:"/register"},"Create an account"))))),n=r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"row"},e,r.a.createElement("a",{className:"waves-effect waves-light btn",onClick:this.handleRegister},"CREATE")));return r.a.createElement("div",{className:"container auth"},r.a.createElement(p.a,{className:"logo",to:"/"},"MEMOPAD"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"header blue white-text center"},r.a.createElement("div",{className:"card-content"},this.props.mode?"LOGIN":"REGISTER")),this.props.mode?t:n))}}])&&M(n.prototype,o),a&&M(n,a),t}(),x={mode:f.a.bool,onLogin:f.a.func,onRegister:f.a.func},H=function(e){return function(){return console.warn("".concat(e," is not defined"))}},F={mode:!0,onLogin:H("login"),onRegister:H("register")};$.propTypes=x,$.defaultProps=F;var G=$;function D(e){return(D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var J=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=B(t).call(this,e))||"object"!==D(r)&&"function"!==typeof r?z(o):r).state={contents:""},n.hanldleChange=n.hanldleChange.bind(z(z(n))),n.handlePost=n.handlePost.bind(z(z(n))),n}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,r.a.Component),n=t,(o=[{key:"hanldleChange",value:function(e){this.setState({contents:e.target.value})}},{key:"handlePost",value:function(){var e=this,t=this.state.contents;this.props.onPost(t).then(function(){e.setState({contents:""})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container write"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("textarea",{className:"materialize-textarea",placeholder:"Write down your memo",value:this.state.contents,onChange:this.hanldleChange})),r.a.createElement("div",{className:"card-action"},r.a.createElement("a",{onClick:this.handlePost},"POST"))))}}])&&q(n.prototype,o),a&&q(n,a),t}();J.propTypes={onPost:f.a.func},J.defaultProps={onPost:function(e){console.error("post function not defined")}};var K=J,V=n(109),Y=n.n(V);function Q(e){return(Q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ne=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Z(t).call(this,e))||"object"!==Q(r)&&"function"!==typeof r?te(o):r).state={editMode:!1,editText:e.data.contents},n.activeBtn=n.activeBtn.bind(te(te(n))),n.toggleEdit=n.toggleEdit.bind(te(te(n))),n.handleChange=n.handleChange.bind(te(te(n))),n.handleRemove=n.handleRemove.bind(te(te(n))),n.handleStar=n.handleStar.bind(te(te(n))),n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,o["Component"]),n=t,(a=[{key:"shouldComponentUpdate",value:function(e,t){var n={props:this.props,state:this.state},o={props:e,state:t};return JSON.stringify(n)!==JSON.stringify(o)}},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"activeBtn",value:function(){var e=document.getElementById("dropdown-"+this.props.data._id);"block"!==e.style.display?(e.style.opacity=1,e.style.display="block"):(e.style.opacity=0,e.style.display="none")}},{key:"toggleEdit",value:function(){var e=this;if(this.state.editMode){var t=this.props.data._id,n=this.props.index,o=this.state.editText;this.props.onEdit(t,n,o).then(function(){e.setState({editMode:!e.state.editMode})})}else this.setState({editMode:!this.state.editMode})}},{key:"handleChange",value:function(e){this.setState({editText:e.target.value})}},{key:"handleRemove",value:function(){var e=this.props.data._id,t=this.props.index;this.props.onRemove(e,t)}},{key:"handleStar",value:function(){var e=this.props.data._id,t=this.props.index;this.props.onStar(e,t)}},{key:"render",value:function(){var e=this.props,t=e.data,n=(e.ownership,r.a.createElement("span",{style:{color:"#AAB5BC"}}," \xb7 Edited ",r.a.createElement(Y.a,{date:this.props.data.date.edited,live:!0}))),o=r.a.createElement("div",{className:"option-button"},r.a.createElement("a",{className:"dropdown-button",id:"dropdown-button-".concat(t._id),"data-activates":"dropdown-".concat(t._id),onClick:this.activeBtn},r.a.createElement("i",{className:"material-icons icon-button"},"more_vert")),r.a.createElement("ul",{id:"dropdown-".concat(t._id),className:"dropdown-content"},r.a.createElement("li",null,r.a.createElement("a",{onClick:this.toggleEdit},"Edit")),r.a.createElement("li",null,r.a.createElement("a",{onClick:this.handleRemove},"Remove")))),a=r.a.createElement("div",{className:"write"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("textarea",{className:"materialize-textarea",onChange:this.handleChange,value:this.state.editText})),r.a.createElement("div",{className:"card-action"},r.a.createElement("a",{onClick:this.toggleEdit},"OK")))),i=this.props.data.starred.indexOf(this.props.currentUser)>-1?{color:"#ff9980"}:{color:"#e9e9e9"},s=r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"info"},r.a.createElement(p.a,{to:"/wall/".concat(this.props.data.writer),className:"username"},this.props.data.writer),"wrote a log \xb7 ",r.a.createElement(Y.a,{date:this.props.data.date.created}),this.props.data.is_edited?n:void 0,this.props.ownership?o:void 0),r.a.createElement("div",{className:"card-content"},t.contents),r.a.createElement("div",{className:"footer"},r.a.createElement("a",{className:"log-footer-icon icon-button star",onClick:this.handleStar,href:"#none"},r.a.createElement(g,{name:"star",width:"1.5rem",height:"1.5rem",color:i.color}),r.a.createElement("div",{className:"t-h"},"star")),r.a.createElement("span",{className:"star-count"},this.props.data.starred.length)));return r.a.createElement("div",{className:"container memo"},this.state.editMode?a:s)}}])&&X(n.prototype,a),i&&X(n,i),t}(),oe={data:f.a.object,ownership:f.a.bool,onEdit:f.a.func,onRemove:f.a.func,index:f.a.number,onStar:f.a.func,currentUser:f.a.string},re={data:{_id:"id1234567890",writer:"Writer",contents:"Contents",is_edited:!1,date:{edited:new Date,created:new Date},starred:[]},ownership:!0,onEdit:function(e,t,n){console.error("onEdit function not defined")},onRemove:function(e,t){console.error("onRemove function not defined")},index:-1,currentUser:""};ne.propTypes=oe,ne.defaultProps=re;n(341);function ae(e){return(ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function se(e,t){return!t||"object"!==ae(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),se(this,ce(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,o["Component"]),n=t,(a=[{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props)!==JSON.stringify(e)}},{key:"render",value:function(){var e=this;console.log("MemoList render method executed");return r.a.createElement("div",null,r.a.createElement(d.a,{transitionName:"memo",transitionEnterTimeout:2e3,transitionLeaveTimeout:1e3},this.props.data.map(function(t,n){return r.a.createElement(ne,{data:t,ownership:t.writer===e.props.currentUser,key:t._id,index:n,onEdit:e.props.onEdit,onRemove:e.props.onRemove,onStar:e.props.onStar,currentUser:e.props.currentUser})})))}}])&&ie(n.prototype,a),i&&ie(n,i),t}(),fe={data:f.a.array,currentUser:f.a.string,onEdit:f.a.func,onRemove:f.a.func,onStar:f.a.func},pe={data:[],currentUser:"",onEdit:function(e,t,n){console.error("edit function not defined")},onRemove:function(e,t){console.error("onRemove function not defined")},onStar:function(e,t){console.error("onStar function not defined")}};function me(e){return(me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}le.propTypes=fe,le.defaultProps=pe;var ve=function(e){function t(e){var n,o,r,a,i,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=he(t).call(this,e),n=!r||"object"!==me(r)&&"function"!==typeof r?be(o):r,a=be(be(n)),s=function(e){13===e.keyCode&&n.props.usernames.length>0&&(n.handleClose(),n.props.history.push("/wall/"+n.props.usernames[0].username))},(i="handleKeyDown")in a?Object.defineProperty(a,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[i]=s,n.state={keyword:""},n.handleClose=n.handleClose.bind(be(be(n))),n.handleChange=n.handleChange.bind(be(be(n))),n.handleSearch=n.handleSearch.bind(be(be(n)));return document.onkeydown=function(e){27==(e=e||window.event).keyCode&&n.handleClose()},n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,o["Component"]),n=t,(a=[{key:"handleClose",value:function(){this.handleSearch(""),document.onkeydown=null,this.props.onClose()}},{key:"handleChange",value:function(e){this.setState({keyword:e.target.value}),this.handleSearch(e.target.value)}},{key:"handleSearch",value:function(e){this.props.onSearch(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"search-screen white-text"},r.a.createElement("div",{className:"right"},r.a.createElement("a",{className:"waves-effect waves-light btn red lighten-1",onClick:this.handleClose},"CLOSE")),r.a.createElement("div",{className:"container"},r.a.createElement("input",{placeholder:"Search a user",value:this.state.keyword,onChange:this.handleChange,onKeyDown:this.handleKeyDown}),r.a.createElement("ul",{className:"search-results"},this.props.usernames.map(function(e,t){return r.a.createElement(p.a,{to:"/wall/".concat(e.username),key:t},e.username)}))))}}])&&de(n.prototype,a),i&&de(n,i),t}(),Ee={onClose:f.a.func,onSearch:f.a.func,usernames:f.a.array},Se=function(e){return function(){return console.warn("".concat(e," is not defined"))}},ge={onClose:Se("onClose"),onSearch:Se("onSearch"),usernames:[]};ve.propTypes=Ee,ve.defaultProps=ge;var Oe,we=Object(u.a)(ve),_e=n(28),Ce=n(373),Te=n(370),je=n(3),Re=n.n(je);function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie,Le=Object(Ce.a)("auth/AUTH_LOGIN"),Pe=Object(Ce.a)("auth/AUTH_LOGIN_SUCCESS"),Me=Object(Ce.a)("auth/AUTH_LOGIN_FAILURE"),Ne=Object(Ce.a)("auth/AUTH_REGISTER"),ke=Object(Ce.a)("auth/AUTH_REGISTER_SUCCESS"),Ae=Object(Ce.a)("auth/AUTH_REGISTER_FAILURE"),$e=Object(Ce.a)("auth/AUTH_GET_STATUS"),xe=Object(Ce.a)("auth/AUTH_GET_STATUS_SUCCESS"),He=Object(Ce.a)("auth/AUTH_GET_STATUS_FAILURE"),Fe=Object(Ce.a)("auth/AUTH_LOGOUT"),Ge=Object(Te.a)((Ue(Oe={},"auth/AUTH_LOGIN",function(e){return Re()(e,{login:{status:{$set:"WAITING"}}})}),Ue(Oe,"auth/AUTH_LOGIN_SUCCESS",function(e,t){return Re()(e,{login:{status:{$set:"SUCCESS"}},status:{isLoggedIn:{$set:!0},currentUser:{$set:t.username}}})}),Ue(Oe,"auth/AUTH_LOGIN_FAILURE",function(e){return Re()(e,{login:{status:{$set:"FAILURE"}}})}),Ue(Oe,"auth/AUTH_REGISTER",function(e){return Re()(e,{register:{status:{$set:"WAITING"},error:{$set:-1}}})}),Ue(Oe,"auth/AUTH_REGISTER_SUCCESS",function(e){return Re()(e,{register:{status:{$set:"SUCCESS"}}})}),Ue(Oe,"auth/AUTH_REGISTER_FAILURE",function(e,t){return Re()(e,{register:{status:{$set:"FAILURE"},error:{$set:t.error}}})}),Ue(Oe,"auth/AUTH_GET_STATUS",function(e){return Re()(e,{status:{isLoggedIn:{$set:!0}}})}),Ue(Oe,"auth/AUTH_GET_STATUS_SUCCESS",function(e,t){return Re()(e,{status:{valid:{$set:!0},currentUser:{$set:t.username}}})}),Ue(Oe,"auth/AUTH_GET_STATUS_FAILURE",function(e){return Re()(e,{status:{valid:{$set:!1},isLoggedIn:{$set:!1}}})}),Ue(Oe,"auth/AUTH_LOGOUT",function(e){return Re()(e,{status:{isLoggedIn:{$set:!1},currentUser:{$set:""}}})}),Oe),{login:{status:"INIT"},register:{status:"INIT",error:-1},status:{valid:!1,isLoggedIn:!1,currentUser:""}}),De=n(18),qe=n.n(De);function Be(e,t){return function(n){return n({type:Le}),qe.a.post("/api/account/signin",{username:e,password:t}).then(function(t){n(function(e){return{type:Pe,username:e}}(e))}).catch(function(e){n({type:Me})})}}function We(e,t){return function(n){return n({type:Ne}),qe.a.post("/api/account/signup",{username:e,password:t}).then(function(e){n({type:ke})}).catch(function(e){n(function(e){return{type:Ae,error:e}}(e.response.data.code))})}}function ze(){return function(e){return e({type:$e}),qe.a.get("/api/account/getInfo").then(function(t){var n;e((n=t.data.info.username,{type:xe,username:n}))}).catch(function(t){e({type:He})})}}function Je(){return function(e){return qe.a.post("/api/account/logout").then(function(t){e({type:Fe})})}}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve=Object(Ce.a)("search/SEARCH"),Ye=Object(Ce.a)("search/SEARCH_SUCCESS"),Qe=Object(Ce.a)("search/SEARCH_FAILURE"),Xe=Object(Te.a)((Ke(Ie={},"search/SEARCH",function(e){return Re()(e,{searchHead:{status:{$set:"WAITING"},usernames:{$set:[]}}})}),Ke(Ie,"search/SEARCH_SUCCESS",function(e,t){return Re()(e,{searchHead:{status:{$set:"SUCCESS"},usernames:{$set:t.username}}})}),Ke(Ie,"search/SEARCH_FAILURE",function(e,t){return Re()(e,{searchHead:{status:{$set:"FAILURE"},error:{$set:t.error}}})}),Ie),{searchHead:{status:"INIT",usernames:[]}}),Ze=n(75),et=n.n(Ze);function tt(e){return function(t){return t({type:Ve}),qe.a.get("/api/account/search/"+e).then(function(e){var n;t((n=e.data,{type:Ye,username:n}))}).catch(function(e){t((e.response.data.code,{type:Qe}))})}}et.a.polyfill();var nt=n(56),ot=n.n(nt),rt=n(38),at=n.n(rt);n(365);function it(e){return(it="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ft,pt=function(e){function t(e){var n,o,r,a,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=ct(t).call(this,e),n=!r||"object"!==it(r)&&"function"!==typeof r?lt(o):r,a=lt(lt(n)),s=function(e){return n.props.searchRequest(e).then(function(){if("SUCCESS"!==n.props.searchStatus){console.log("\uac80\uc0c9\uc5d0 \uc624\ub958\uac00 \uc788\uc2b5\ub2c8\ub2e4.")}})},(i="handleSearch")in a?Object.defineProperty(a,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[i]=s,n.handleLogout=n.handleLogout.bind(lt(lt(n))),n}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;var t=function(e){var t=("; "+document.cookie).split("; "+e+"=");if(2==t.length)return t.pop().split(";").shift()}("key");"undefined"!==typeof t&&(t=JSON.parse(atob(t))).isLoggedIn&&this.props.getStatusRequest().then(function(){if(console.log(e.props.status),!e.props.status.valid){t={isLoggedIn:!1,username:""},document.cookie="key="+btoa(JSON.stringify(t));var n=ot()('<span style="color: #FFB4BA">Your session is expired, please log in again</span>');at.a.toast(n,4e3)}})}},{key:"handleLogout",value:function(){this.props.logoutRequest().then(function(){at.a.toast("Good Bye!",2e3);document.cookie="key="+btoa(JSON.stringify({isLoggedIn:!1,username:""}))})}},{key:"render",value:function(){var e=/(login|register)/.test(this.props.location.pathname);return r.a.createElement("div",null,e?void 0:r.a.createElement(L,{isLoggedIn:this.props.status.isLoggedIn,onLogout:this.handleLogout,onSearch:this.handleSearch,usernames:this.props.searchUsers,searchStatus:this.props.searchStatus}),r.a.createElement(c.a,{exact:!0,path:"/",component:Dt}),r.a.createElement(c.a,{path:"/home/",component:Dt}),r.a.createElement(c.a,{path:"/login/",component:tn}),r.a.createElement(c.a,{path:"/register/",component:un}),r.a.createElement(c.a,{path:"/wall/:username",component:Kt}))}}])&&st(n.prototype,o),a&&st(n,a),t}(),mt=Object(u.a)(Object(_e.b)(function(e){return{status:e.authentication.status,searchUsers:e.search.searchHead.usernames,searchStatus:e.search.searchHead.status}},function(e){return{getStatusRequest:function(){return e(ze())},logoutRequest:function(){return e(Je())},searchRequest:function(t){return e(tt(t))}}})(pt));function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ht=Object(Ce.a)("memo/MEMO_POST"),yt=Object(Ce.a)("memo/MEMO_POST_SUCCESS"),bt=Object(Ce.a)("memo/MEMO_POST_FAILURE"),vt=Object(Ce.a)("memo/MEMO_LIST"),Et=Object(Ce.a)("memo/MEMO_LIST_SUCCESS"),St=Object(Ce.a)("memo/MEMO_LIST_FAILURE"),gt=Object(Ce.a)("memo/MEMO_EDIT"),Ot=Object(Ce.a)("memo/MEMO_EDIT_SUCCESS"),wt=Object(Ce.a)("memo/MEMO_EDIT_FAILURE"),_t=Object(Ce.a)("memo/MEMO_REMOVE"),Ct=Object(Ce.a)("memo/MEMO_REMOVE_SUCCESS"),Tt=Object(Ce.a)("memo/MEMO_REMOVE_FAILURE"),jt=Object(Ce.a)("memo/MEMO_STAR"),Rt=Object(Ce.a)("memo/MEMO_STAR_SUCCESS"),Ut=Object(Ce.a)("memo/MEMO_STAR_FAILURE"),It=Object(Te.a)((dt(ft={},"memo/MEMO_POST",function(e){return Re()(e,{post:{status:{$set:"WAITING"},error:{$set:-1}}})}),dt(ft,"memo/MEMO_POST_SUCCESS",function(e){return Re()(e,{post:{status:{$set:"SUCCESS"}}})}),dt(ft,"memo/MEMO_POST_FAILURE",function(e,t){return Re()(e,{post:{status:{$set:"FAILURE"},error:{$set:t.error}}})}),dt(ft,"memo/MEMO_LIST",function(e){return Re()(e,{list:{status:{$set:"WAITING"}}})}),dt(ft,"memo/MEMO_LIST_SUCCESS",function(e,t){return t.isInitial?Re()(e,{list:{status:{$set:"SUCCESS"},data:{$set:t.data},isLast:{$set:t.data.length<6}}}):"new"===t.listType?Re()(e,{list:{status:{$set:"SUCCESS"},data:{$unshift:t.data}}}):Re()(e,{list:{status:{$set:"SUCCESS"},data:{$push:t.data},isLast:{$set:t.data.length<6}}})}),dt(ft,"memo/MEMO_LIST_FAILURE",function(e){return Re()(e,{list:{status:{$set:"FAILURE"}}})}),dt(ft,"memo/MEMO_EDIT",function(e){return Re()(e,{edit:{status:{$set:"WAITING"},error:{$set:-1},memo:{$set:void 0}}})}),dt(ft,"memo/MEMO_EDIT_SUCCESS",function(e,t){return Re()(e,{edit:{status:{$set:"SUCCESS"}},list:{data:dt({},t.index,{$set:t.memo})}})}),dt(ft,"memo/MEMO_EDIT_FAILURE",function(e,t){return Re()(e,{edit:{status:{$set:"FAILURE"},error:{$set:t.error}}})}),dt(ft,"memo/MEMO_REMOVE",function(e){return console.log("\ub9ac\ub4c0\uc11c"),Re()(e,{remove:{status:{$set:"WAITING"}}})}),dt(ft,"memo/MEMO_REMOVE_SUCCESS",function(e,t){return Re()(e,{remove:{status:{$set:"SUCCESS"}},list:{data:{$splice:[[t.index,1]]}}})}),dt(ft,"memo/MEMO_REMOVE_FAILURE",function(e,t){return Re()(e,{remove:{status:{$set:"FAILURE"},error:{$set:t.error}}})}),dt(ft,"memo/MEMO_STAR",function(e){return Re()(e,{star:{status:{$set:"WAITING"},error:{$set:-1}}})}),dt(ft,"memo/MEMO_STAR_SUCCESS",function(e,t){return Re()(e,{star:{status:{$set:"SUCCESS"}},list:{data:dt({},t.index,{$set:t.memo})}})}),dt(ft,"memo/MEMO_STAR_FAILURE",function(e,t){return Re()(e,{star:{status:{$set:"FAILURE"},error:{$set:t.error}}})}),ft),{post:{status:"INIT",error:-1},list:{status:"INIT",data:[],isLast:!1},edit:{status:"INIT",error:-1},remove:{status:"INIT",error:-1},star:{status:"INIT",error:-1}});function Lt(e){return function(t){return t({type:ht}),qe.a.post("/api/memo/",{contents:e}).then(function(e){t({type:yt})}).catch(function(e){t(function(e){return{type:bt,error:e}}(e.response.data.code))})}}function Pt(e,t,n,o){return function(r){r({type:vt});var a="/api/memo";return a="undefined"===typeof o?e?a:"".concat(a,"/").concat(t,"/").concat(n):e?"".concat(a,"/").concat(o):"".concat(a,"/").concat(o,"/").concat(t,"/").concat(n),qe.a.get(a).then(function(n){r(function(e,t,n){return{type:Et,data:e,isInitial:t,listType:n}}(n.data,e,t))}).catch(function(e){r({type:St})})}}function Mt(e,t,n){return function(o){return o({type:gt}),qe.a.put("/api/memo/"+e,{contents:n}).then(function(e){o(function(e,t){return{type:Ot,index:e,memo:t}}(t,e.data.memo))}).catch(function(e){o(function(e){return{type:wt,error:e}}(e.response.data.code))})}}function Nt(e,t){return function(n){return n({type:_t}),console.log("\ubcf4\ub0c4"),qe.a.delete("/api/memo/"+e).then(function(e){console.log("\uc131\uacf5"),n(function(e){return{type:Ct,index:e}}(t))}).catch(function(e){n(function(e){return{type:Tt,error:e}}(e.response.data.code))})}}function kt(e,t){return function(n){return n({type:jt}),qe.a.post("/api/memo/star/"+e).then(function(e){n(function(e,t){return{type:Rt,index:e,memo:t}}(t,e.data.memo))}).catch(function(e){n(function(e){return{type:Ut,error:e}}(e.response.data.code))})}}function At(e){return(At="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}et.a.polyfill();var Gt=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=xt(t).call(this,e))||"object"!==At(r)&&"function"!==typeof r?Ft(o):r).handlePost=n.handlePost.bind(Ft(Ft(n))),n.loadNewMemo=n.loadNewMemo.bind(Ft(Ft(n))),n.loadOldMemo=n.loadOldMemo.bind(Ft(Ft(n))),n.componentWillUnmount=n.componentWillUnmount.bind(Ft(Ft(n))),n.componentDidMount=n.componentDidMount.bind(Ft(Ft(n))),n.scrollEvent=n.scrollEvent.bind(Ft(Ft(n))),n.handleEdit=n.handleEdit.bind(Ft(Ft(n))),n.handleRemove=n.handleRemove.bind(Ft(Ft(n))),n.handleStar=n.handleStar.bind(Ft(Ft(n))),n.state={loadingState:!1,initiallyLoaded:!1},n}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(t,r.a.Component),n=t,(o=[{key:"handlePost",value:function(e){var t=this;return this.props.memoPostRequest(e).then(function(){if("SUCCESS"===t.props.postStatus.status)t.loadNewMemo().then(function(){console.log("\uae00\uc744 \uc791\uc131\ud558\uc600\uc2b5\ub2c8\ub2e4.")});else switch(t.props.postStatus.error){case 1:console.log("\ub85c\uadf8\uc778\uc744 \ud574\uc8fc\uc138\uc694!");break;case 2:console.log("\ubb34\uc5b8\uac00 \uc791\uc131\ud574\uc8fc\uc138\uc694!");break;default:console.log("\uc624\ub958\uac00 \uc788\uc2b5\ub2c8\ub2e4.\n\ub2e4\uc2dc \uc791\uc131\ud574\uc8fc\uc138\uc694")}})}},{key:"scrollEvent",value:function(){document.documentElement.scrollHeight-window.innerHeight-window.scrollY<150&&(this.state.loadingState?this.state.loadingState&&this.setState({loadingState:!1}):(console.log("LOAD NOW"),this.loadOldMemo(),this.setState({loadingState:!1})))}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",this.scrollEvent,!0);var t=function t(){document.documentElement.offsetHeight<window.innerHeight&&e.loadOldMemo().then(function(){e.props.isLast||t()})};this.props.memoListRequest(!0,void 0,void 0,this.props.username).then(function(){setTimeout(t,1e3),function t(){e.loadNewMemo().then(function(){e.memoLoaderTimeoutId=setTimeout(t,5e3)})}(),e.setState({initiallyLoaded:!0})})}},{key:"componentDidUpdate",value:function(e,t){this.props.username!==e.username&&(this.componentWillUnmount(),this.componentDidMount())}},{key:"componentWillUnmount",value:function(){clearTimeout(this.memoLoaderTimeoutId),window.removeEventListener("scroll",this.scrollEvent,!0),this.setState({initiallyLoaded:!1})}},{key:"loadNewMemo",value:function(){return"WAITING"===this.props.listStatus?new Promise(function(e,t){e()}):0===this.props.memoData.length?this.props.memoListRequest(!0,void 0,void 0,this.props.username):this.props.memoListRequest(!1,"new",this.props.memoData[0]._id,this.props.username)}},{key:"loadOldMemo",value:function(){var e=this;if(console.log(this.props.memoData[0]._id),this.props.isLast)return new Promise(function(e,t){e()});var t=this.props.memoData[this.props.memoData.length-1]._id;return this.props.memoListRequest(!1,"old",t,this.props.username).then(function(){e.props.isLast&&console.log("\ub354\uc774\uc0c1 \ucd9c\ub825\ud560\uac83\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")})}},{key:"handleEdit",value:function(e,t,n){var o=this;return this.props.memoEditRequest(e,t,n).then(function(){if("SUCCESS"===o.props.editStatus.status)console.log("\uc218\uc815 \uc644\ub8cc\ud588\uc2b5\ub2c8\ub2e4.");else{var e=o.props.editStatus.error;console.log(["Something broke","Please write soemthing","You are not logged in","That memo does not exist anymore","You do not have permission"][e-1]),3===e&&setTimeout(function(){window.location.reload(!1)},2e3)}})}},{key:"handleRemove",value:function(e,t){var n=this;return this.props.memoRemoveRequest(e,t).then(function(){if(console.log("\uc870\uac74\ubb38 \ub0b4\ubd80"),"SUCCESS"===n.props.removeStatus.status)console.log("Home"),setTimeout(function(){document.documentElement.offsetHeight<window.innerHeight&&n.loadOldMemo()},1e3);else{console.log(["Something broke","You are not logged in","That memo does not exist","You do not have permission"][n.props.removeStatus.error-1]),2===n.props.removeStatus.error&&setTimeout(function(){window.location.reload(!1)},2e3)}})}},{key:"handleStar",value:function(e,t){var n=this;this.props.memoStarRequest(e,t).then(function(){if("SUCCESS"!==n.props.starStatus){console.log(["Something broke","You are not logged in","That memo does not exist"][n.props.starStatus.error-1]),2===n.props.starStatus.error&&(console.log("\ub85c\uadf8\uc778\uc744 \ud574\uc8fc\uc138\uc694."),setTimeout(function(){window.location.reload(!1)},2e3))}})}},{key:"render",value:function(){var e=r.a.createElement(K,{onPost:this.handlePost}),t=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"empty-page"},r.a.createElement("b",null,this.props.username)," isn't registered or hasn't written any memo")),n=r.a.createElement("div",null,r.a.createElement("div",{className:"container wall-info"},r.a.createElement("div",{className:"card wall-info blue lighten-2 white-text"},r.a.createElement("div",{className:"card-content"},this.props.username))),0===this.props.memoData.length&&this.state.initiallyLoaded?t:void 0);return r.a.createElement("div",{className:"wrapper"},"undefined"!==typeof this.props.username?n:void 0,this.props.isLoggedIn&&"undefined"===typeof this.props.username?e:void 0,r.a.createElement(le,{data:this.props.memoData,currentUser:this.props.currentUser,onEdit:this.handleEdit,onRemove:this.handleRemove,onStar:this.handleStar}))}}])&&$t(n.prototype,o),a&&$t(n,a),t}();Gt.PropTypes={username:f.a.string},Gt.defaultProps={username:void 0};var Dt=Object(u.a)(Object(_e.b)(function(e){return{isLoggedIn:e.authentication.status.isLoggedIn,postStatus:e.memo.post,currentUser:e.authentication.status.currentUser,memoData:e.memo.list.data,listStatus:e.memo.list.status,isLast:e.memo.list.isLast,editStatus:e.memo.edit,removeStatus:e.memo.remove,starStatus:e.memo.star}},function(e){return{memoPostRequest:function(t){return e(Lt(t))},memoListRequest:function(t,n,o,r){return e(Pt(t,n,o,r))},memoEditRequest:function(t,n,o){return e(Mt(t,n,o))},memoRemoveRequest:function(t,n){return e(Nt(t,n))},memoStarRequest:function(t,n){return e(kt(t,n))}}})(Gt));function qt(e){return(qt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wt(e,t){return!t||"object"!==qt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wt(this,zt(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){return console.log(this.props.match.params),r.a.createElement("div",null,r.a.createElement(Dt,{username:this.props.match.params.username}))}}])&&Bt(n.prototype,a),i&&Bt(n,i),t}();function Vt(e){return(Vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var en=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=Qt(t).call(this,e))||"object"!==Vt(r)&&"function"!==typeof r?Zt(o):r).handleLogin=n.handleLogin.bind(Zt(Zt(n))),n}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(t,r.a.Component),n=t,(o=[{key:"handleLogin",value:function(e,t){var n=this;return this.props.loginRequest(e,t).then(function(){if("SUCCESS"===n.props.status){var t={isLoggedIn:!0,username:e};return document.cookie="key="+btoa(JSON.stringify(t)),n.props.history.push("/"),!0}var o=ot()('<span style="color: #FFB4BA">Incorrect username or password</span>');return at.a.toast(o,2e3),!1})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(G,{mode:!0,onLogin:this.handleLogin}))}}])&&Yt(n.prototype,o),a&&Yt(n,a),t}(),tn=Object(u.a)(Object(_e.b)(function(e){return{status:e.authentication.login.status}},function(e){return{loginRequest:function(t,n){return e(Be(t,n))}}})(en));function nn(e){return(nn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var cn=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=rn(t).call(this,e))||"object"!==nn(r)&&"function"!==typeof r?sn(o):r).handleRegister=n.handleRegister.bind(sn(sn(n))),n}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(t,r.a.Component),n=t,(o=[{key:"handleRegister",value:function(e,t){var n=this;return this.props.registerRequest(e,t).then(function(){if(console.log(n.props.status),"SUCCESS"===n.props.status)return at.a.toast("Success! Please log in.",2e3),console.log("\ud68c\uc6d0\uac00\uc785 \uc131\uacf5!"),n.props.history.push("/login"),!0;console.log("\ud68c\uc6d0\uac00\uc785 \uc2e4\ud328!");var e=ot()('<span style="color: #FFB4BA">'+["Invalid Username","Password is too short","Username already exists"][n.props.errorCode-1]+"</span>");return at.a.toast(e,2e3),!1})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(G,{mode:!1,onRegister:this.handleRegister}))}}])&&on(n.prototype,o),a&&on(n,a),t}(),un=Object(u.a)(Object(_e.b)(function(e){return{status:e.authentication.register.status,errorCode:e.authentication.register.error}},function(e){return{registerRequest:function(t,n){return e(We(t,n))}}})(cn)),ln=n(47),fn=n(155),pn=Object(ln.c)({authentication:Ge,memo:It,search:Xe}),mn=function(){return Object(ln.d)(pn,Object(ln.a)(fn.a))}();i.a.render(r.a.createElement(_e.a,{store:mn},r.a.createElement(s.a,null,r.a.createElement(mt,null))),document.getElementById("root"))}},[[156,2,1]]]);
//# sourceMappingURL=main.3d9b5731.chunk.js.map